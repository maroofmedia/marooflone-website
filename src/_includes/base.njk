<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title> {{ title }} </title>
  <link rel="stylesheet" href="/style.css?v=fix2">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Source+Code+Pro:ital,wght@0,200..900;1,200..900&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
  <link href="https://unpkg.com/prismjs@1.20.0/themes/prism-okaidia.css" rel="stylesheet">

  <!-- Favicon -->
  <link rel="apple-touch-icon" sizes="180x180" href="/assets
  
  /images/favicon/apple-touch-icon.png?v=2">
  <link rel="icon" type="image/png" sizes="32x32" href="/assets/images/favicon/favicon-32x32.png?v=2">
  <link rel="icon" type="image/png" sizes="16x16" href="/assets/images/favicon/favicon-16x16.png?v=2">
  <link rel="manifest" href="/assets/images/favicon/site.webmanifest?v=2">
   
  <!-- Open Graph Meta Tags -->
  <meta property="og:title" content="{{ title | default('Hi, I\'m Maroof Lone') }}">
  <meta property="og:description" content="{{ description | default('Blogger | CSE Student | Cybersecurity Explorer | Exploring stories, trends, and insights that matter.') }}">
  <meta property="og:image" content="{{ site.url }}{% if image %}{{ image }}{% else %}/assets/images/main-images/og-discription-image.png?v=2{% endif %}">
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="630">
  <meta property="og:url" content="{{ site.url }}{{ page.url }}">
  <meta property="og:image:alt" content="{{ title | default('Maroof Lone - Blogger and CSE Student') }}">

{% if page.url %}
{% if page.url.startsWith('/blog/') %}
    <meta property="og:type" content="article">
  {% else %}
    <meta property="og:type" content="website">
  {% endif %}
{% else %}
  <meta property="og:type" content="website">
{% endif %}


<!-- Twitter Card Meta Tags -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image:width" content="1200">
<meta name="twitter:image:height" content="630">
<meta name="twitter:title" content="{{ title | default('Hi, I\'m Maroof Lone') }}">
<meta name="twitter:description" content="{{ description | default('Blogger | CSE Student | Cybersecurity Explorer | Exploring stories, trends, and insights that matter.') }}">
<meta name="twitter:image" content="{{ site.url }}{% if image %}{{ image }}{% else %}/assets/images/main-images/og-discription-image.png?v=2{% endif %}">
<meta name="twitter:image:alt" content="{{ title | default('Maroof Lone - Blogger and CSE Student') }}">

<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-T20K3YKJP9"></script>

<!-- Netlify CMS -->
 <script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>


</head>
<body>
  <div class="page-wrapper">
    {% include 'header.njk' %}
    <main>
      {{ content | safe }}
    </main>
    {% include 'footer.njk' %}
  </div>

  <script>
    // Netlify Identity
    if (window.netlifyIdentity) {
      window.netlifyIdentity.on("init", (user) => {
        if (!user) {
          window.netlifyIdentity.on("login", () => {
            document.location.href = "/admin/";
          });
        }
      });
    }

    // Header Scroll Behavior
    let lastScroll = 0;
    const header = document.getElementById('mainHeader');
    const threshold = 50;

    window.addEventListener('scroll', () => {
      const currentScroll = window.pageYOffset;
      
      // Only trigger if scrolled more than threshold
      if (Math.abs(currentScroll - lastScroll) < 10) return;

      if (currentScroll > lastScroll && currentScroll > threshold) {
        // Scroll Down
        header.classList.add('hidden');
      } else {
        // Scroll Up
        header.classList.remove('hidden');
      }
      lastScroll = currentScroll;
    });

    // Mobile Menu Toggle
    function toggleMenu() {
      const nav = document.getElementById('navMenu');
      const hamburger = document.querySelector('.hamburger');
      nav.classList.toggle('active');
      hamburger.classList.toggle('active');
      document.body.classList.toggle('no-scroll');
    }

    // Close menu when clicking a link
    document.querySelectorAll('.nav-link').forEach(link => {
      link.addEventListener('click', () => {
        const nav = document.getElementById('navMenu');
        const hamburger = document.querySelector('.hamburger');
        if (nav.classList.contains('active')) {
          nav.classList.remove('active');
          hamburger.classList.remove('active');
          document.body.classList.remove('no-scroll');
        }
      });
    });
    
    // Work/Education Accordion
    function toggleAccordion(element) {
 
        /*
        document.querySelectorAll('.timeline-item').forEach(item => {
            if (item !== element) item.classList.remove('open');
        });
        */
        
       element.classList.toggle('open');
    }
    // Scroll Animations
    const observerOptions = {
      root: null,
      rootMargin: '0px',
      threshold: 0.1
    };

    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.classList.add('animated');
          observer.unobserve(entry.target);
        }
      });
    }, observerOptions);

    document.querySelectorAll('.animate-on-scroll').forEach(el => {
      observer.observe(el);
    });
  </script>


<div id="privacy-modal" class="modal-overlay">
    <div class="modal-content">
        <button class="close-modal" aria-label="Close modal">
            <i class="fas fa-times"></i>
        </button>
        
        <div class="modal-header">
            <h3>Privacy Notice</h3>
        </div>
        
        <div class="modal-body">
            <p>This personal website is created and maintained by me. All writings, photos, projects and/or any other material on this site are original unless clearly stated otherwise.</p>
            
            <p>I only collect basic information that helps me understand how visitors use the website. This includes anonymized data such as page views, device type, and general location, which is tracked through Google Analytics. No personally identifiable information is collected unless you choose to share it with me through a contact form or email.</p>
            
            <p>Any data you share voluntarily will be used only for the purpose you intended and will never be sold or misused.</p>
            
            <div class="modal-agreement">
                <i class="fas fa-check-circle"></i> 
                <span>By using this website, you agree to this privacy notice. If you have questions, feel free to contact me.</span>
            </div>
        </div>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const trigger = document.getElementById('privacy-trigger');
    const modal = document.getElementById('privacy-modal');
    const closeBtn = document.querySelector('.close-modal');

    // 1. Open Modal
    if(trigger) {
        trigger.addEventListener('click', function(e) {
            e.preventDefault();
            modal.classList.add('active');
            document.body.style.overflow = 'hidden'; 
        });
    }

    // 2. Close Modal function
    function closeModal() {
        modal.classList.remove('active');
        document.body.style.overflow = ''; 
    }

    // 3. Close on X button
    if(closeBtn) {
        closeBtn.addEventListener('click', closeModal);
    }

    // 4. Close on Click Outside
    if(modal) {
        modal.addEventListener('click', function(e) {
            if (e.target === modal) {
                closeModal();
            }
        });
    }

    // 5. Close on Escape Key
    document.addEventListener('keydown', function(e) {
        if (e.key === 'Escape' && modal && modal.classList.contains('active')) {
            closeModal();
        }
    });
});
  </script>


  <script>
  // Find all code blocks
  document.querySelectorAll('pre').forEach((pre) => {
    // 1. Create the button
    const button = document.createElement('button');
    button.className = 'copy-button';
    // Use the FontAwesome Copy Icon
    button.innerHTML = '<i class="far fa-copy"></i>';
    button.ariaLabel = 'Copy code';

    // 2. Add Click Event
    button.addEventListener('click', () => {
      const code = pre.querySelector('code').innerText;
      
      navigator.clipboard.writeText(code).then(() => {
        // Change icon to Checkmark on success
        button.innerHTML = '<i class="fas fa-check"></i>';
        button.classList.add('copied');
        
        // Reset back to Copy icon after 2 seconds
        setTimeout(() => {
          button.innerHTML = '<i class="far fa-copy"></i>';
          button.classList.remove('copied');
        }, 2000);
      }).catch(err => {
        console.error('Failed to copy:', err);
      });
    });

    pre.appendChild(button);
  });
</script>


</body>
</html>
